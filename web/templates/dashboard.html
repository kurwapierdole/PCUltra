<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PCUltra - Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/dashboard.css') }}">
    <style>
        /* Toggle Switch */
        .switch-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
        }
        
        .switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 24px;
        }
        
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 24px;
        }
        
        .slider:before {
            position: absolute;
            content: "";
            height: 18px;
            width: 18px;
            left: 3px;
            bottom: 3px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        
        input:checked + .slider {
            background-color: #8b5cf6;
        }
        
        input:checked + .slider:before {
            transform: translateX(26px);
        }
    </style>
</head>
<body>
    <div class="animated-bg" id="animatedBg"></div>
    <div class="layout">
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="brand-icon">PC</div>
            </div>
            <nav class="side-menu">
                <a href="#dashboard" class="nav-link active" data-page="dashboard">
                    <span class="icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path fill="currentColor" d="M3 13h8V3H3v10zm0 8h8v-6H3v6zm10 0h8V11h-8v10zm0-18v6h8V3h-8z"/></svg>
                    </span>
                    <span class="label">Панель</span>
                </a>
                <a href="#config" class="nav-link" data-page="config">
                    <span class="icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path fill="currentColor" d="M19.14,12.94a7.43,7.43,0,0,0,.05-.94,7.43,7.43,0,0,0-.05-.94l2.11-1.65a.5.5,0,0,0,.12-.64l-2-3.46a.5.5,0,0,0-.6-.22l-2.49,1a7.28,7.28,0,0,0-1.63-.94l-.38-2.65A.5.5,0,0,0,13.72,2H10.28a.5.5,0,0,0-.49.41L9.41,5.06a7.28,7.28,0,0,0-1.63.94l-2.49-1a.5.5,0,0,0-.6.22l-2,3.46a.5.5,0,0,0,.12.64L4.86,11.06a7.43,7.43,0,0,0-.05.94,7.43,7.43,0,0,0,.05.94L2.75,14.59a.5.5,0,0,0-.12.64l2,3.46a.5.5,0,0,0,.6.22l2.49-1a7.28,7.28,0,0,0,1.63.94l.38,2.65a.5.5,0,0,0,.49.41h3.44a.5.5,0,0,0,.49-.41l.38-2.65a7.28,7.28,0,0,0,1.63-.94l2.49,1a.5.5,0,0,0,.6-.22l2-3.46a.5.5,0,0,0-.12-.64ZM12,15.5A3.5,3.5,0,1,1,15.5,12,3.5,3.5,0,0,1,12,15.5Z"/></svg>
                    </span>
                    <span class="label">Конфигурация</span>
                </a>
                <a href="#shortcuts" class="nav-link" data-page="shortcuts">
                    <span class="icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path fill="currentColor" d="M9 7H7v6h2V7zm8 0h-2v6h2V7zM5 19h14v-2H5v2zM13 7h-2v6h2V7z"/></svg>
                    </span>
                    <span class="label">Команды</span>
                </a>
                <a href="#users" class="nav-link" data-page="users">
                    <span class="icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path fill="currentColor" d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V20h14v-3.5C15 14.17 10.33 13 8 13zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V20h6v-3.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
                    </span>
                    <span class="label">Пользователи</span>
                </a>
                <a href="{{ url_for('logout') }}" class="nav-link">
                    <span class="icon">
                        <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path fill="currentColor" d="M10.09 15.59L11.5 17l5-5-5-5-1.41 1.41L12.67 11H3v2h9.67l-2.58 2.59zM19 3h-6v2h6v14h-6v2h6c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"/></svg>
                    </span>
                    <span class="label">Выход</span>
                </a>
            </nav>
        </aside>

        <main class="main-content">
            <div class="content-panel active" id="dashboard-panel">
                <h1>Панель управления</h1>
                
                <div class="status-cards">
                    <div class="card">
                        <h3>Статус бота</h3>
                        <div class="status-indicator" id="bot-status">
                            <span class="status-dot"></span>
                            <span id="bot-status-text">Загрузка...</span>
                        </div>
                        <div class="bot-controls">
                            <button id="btn-start-bot" class="btn btn-success">Запустить</button>
                            <button id="btn-stop-bot" class="btn btn-danger">Остановить</button>
                            <button id="btn-restart-bot" class="btn btn-warning">Перезапустить</button>
                        </div>
                    </div>

                    <div class="card">
                        <h3>Использование ресурсов</h3>
                        <div class="resource-info">
                            <div class="resource-item">
                                <label>CPU:</label>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="cpu-progress" style="width: 0%"></div>
                                </div>
                                <span id="cpu-text">0%</span>
                            </div>
                            <div class="resource-item">
                                <label>Память:</label>
                                <div class="progress-bar">
                                    <div class="progress-fill" id="memory-progress" style="width: 0%"></div>
                                </div>
                                <span id="memory-text">0%</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="content-panel" id="config-panel">
                <h1>Конфигурация бота</h1>
                
                <div class="card">
                    <h3>Настройки Telegram Bot</h3>
                    <form id="config-form">
                        <div class="form-group">
                            <label for="bot-token">Telegram Bot Token:</label>
                            <input type="text" id="bot-token" name="bot_token" placeholder="Введите токен бота">
                            <small>Получите токен у @BotFather в Telegram</small>
                        </div>
                        <div class="form-group">
                            <label for="command-timeout">Таймаут команды (секунды):</label>
                            <input type="number" id="command-timeout" name="command_timeout" value="30" min="1" max="300">
                        </div>
                        <div class="form-group">
                            <label class="switch-label">
                                <span>Автозапуск бота при старте приложения</span>
                                <label class="switch">
                                    <input type="checkbox" id="auto-start" name="auto_start">
                                    <span class="slider"></span>
                                </label>
                            </label>
                        </div>
                        <button type="submit" class="btn btn-primary">Сохранить</button>
                    </form>
                </div>

                <div class="card">
                    <h3>Настройки Web UI</h3>
                    <form id="web-config-form">
                        <div class="form-group">
                            <label for="admin-username">Имя пользователя:</label>
                            <input type="text" id="admin-username" name="admin_username">
                        </div>
                        <div class="form-group">
                            <label for="admin-password">Новый пароль:</label>
                            <input type="password" id="admin-password" name="admin_password" placeholder="Оставьте пустым, чтобы не менять">
                        </div>
                        <button type="submit" class="btn btn-primary">Сохранить</button>
                    </form>
                </div>
            </div>

            <div class="content-panel" id="shortcuts-panel">
                <h1>Управление командами</h1>
                
                <div class="card">
                    <h3>Добавить команду</h3>
                    <form id="shortcut-form">
                        <div class="form-group">
                            <label for="shortcut-command">Команда (например, /open_spotify):</label>
                            <input type="text" id="shortcut-command" name="command" placeholder="/command_name" required>
                        </div>
                        <div class="form-group">
                            <label for="shortcut-display-name">Отображаемое имя (для бота):</label>
                            <input type="text" id="shortcut-display-name" name="display_name" placeholder="Spotify">
                            <small>Это имя будет отображаться в боте вместо команды</small>
                        </div>
                        <div class="form-group">
                            <label for="shortcut-action">Действие:</label>
                            <select id="shortcut-action" name="action" required>
                                <option value="launch_app">Запуск приложения</option>
                                <option value="open_url">Открыть ссылку</option>
                                <option value="execute_script">Выполнить скрипт</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="shortcut-path">Путь к приложению/URL:</label>
                            <input type="text" id="shortcut-path" name="path" placeholder="C:\Path\To\App.exe или https://example.com" required>
                            <small>Для ссылок укажите полный URL с http:// или https://</small>
                        </div>
                        <div class="form-group">
                            <label for="shortcut-args">Аргументы (через запятую, только для приложений):</label>
                            <input type="text" id="shortcut-args" name="args" placeholder="arg1, arg2">
                        </div>
                        <button type="submit" class="btn btn-primary">Добавить команду</button>
                    </form>
                </div>

                <div class="card">
                    <h3>Существующие команды</h3>
                    <div id="shortcuts-list"></div>
                </div>
            </div>

            <div class="content-panel" id="users-panel">
                <h1>Управление пользователями</h1>
                
                <div class="card">
                    <h3>Добавить пользователя</h3>
                    <form id="user-form">
                        <div class="form-group">
                            <label for="user-id">Telegram User ID:</label>
                            <input type="number" id="user-id" name="user_id" placeholder="123456789" required>
                            <small>Получите свой ID у @userinfobot в Telegram</small>
                        </div>
                        <button type="submit" class="btn btn-primary">Добавить пользователя</button>
                    </form>
                </div>

                <div class="card">
                    <h3>Авторизованные пользователи</h3>
                    <div id="users-list"></div>
                </div>
            </div>
        </main>
    </div>

    <script src="{{ url_for('static', filename='js/dashboard.js') }}"></script>
</body>
</html>